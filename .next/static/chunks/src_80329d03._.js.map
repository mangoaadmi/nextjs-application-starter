{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/hooks/useWebSocket.ts"],"sourcesContent":["import { useEffect, useState, useRef, useCallback } from 'react';\n\ninterface GameState {\n  players: Record<string, any>;\n  zones: any[];\n  turnOrder: string[];\n  currentTurn: number;\n  gamePhase: string;\n  resources: any;\n  ideologyCards: any[];\n  voterCards: any[];\n  openVoterCards: any[];\n  conspiracyCards: any[];\n  headlineCards: any[];\n  currentIdeologyCard: any;\n  pendingHeadlines: any[];\n}\n\ninterface WebSocketMessage {\n  type: string;\n  [key: string]: any;\n}\n\ninterface MoveHistoryEvent {\n  id: string;\n  timestamp: number;\n  type: string;\n  description: string;\n  playerId?: string;\n  playerName?: string;\n  details?: any;\n}\n\nexport const useWebSocket = () => {\n  const [gameState, setGameState] = useState<GameState | null>(null);\n  const [playerId, setPlayerId] = useState<string | null>(null);\n  const [connectionStatus, setConnectionStatus] = useState<'disconnected' | 'connecting' | 'connected'>('disconnected');\n  const [lastMessage, setLastMessage] = useState<WebSocketMessage | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [moveHistory, setMoveHistory] = useState<MoveHistoryEvent[]>([]);\n  \n  const socketRef = useRef<WebSocket | null>(null);\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const reconnectAttempts = useRef(0);\n  const maxReconnectAttempts = 5;\n\n  // Helper function to add events to move history\n  const addToMoveHistory = useCallback((event: Omit<MoveHistoryEvent, 'id' | 'timestamp'>) => {\n    const historyEvent: MoveHistoryEvent = {\n      ...event,\n      id: Math.random().toString(36).substr(2, 9),\n      timestamp: Date.now()\n    };\n    \n    setMoveHistory(prev => [...prev, historyEvent]);\n  }, []);\n\n  // Helper function to create user-friendly error messages\n  const createUserFriendlyError = useCallback((error: any, context: string) => {\n    if (error instanceof Error) {\n      return `${context}: ${error.message}`;\n    }\n    if (typeof error === 'string') {\n      return `${context}: ${error}`;\n    }\n    return `${context}: An unexpected error occurred`;\n  }, []);\n\n  const connect = useCallback(() => {\n    if (socketRef.current?.readyState === WebSocket.OPEN) {\n      return;\n    }\n\n    setConnectionStatus('connecting');\n    setError(null);\n\n    try {\n      socketRef.current = new WebSocket('ws://localhost:8080');\n\n      socketRef.current.onopen = () => {\n        console.log('WebSocket connected');\n        setConnectionStatus('connected');\n        reconnectAttempts.current = 0;\n        setError(null);\n        \n        addToMoveHistory({\n          type: 'connected',\n          description: 'Connected to game server',\n          details: 'WebSocket connection established'\n        });\n      };\n\n      socketRef.current.onmessage = (event) => {\n        try {\n          const message: WebSocketMessage = JSON.parse(event.data);\n          setLastMessage(message);\n\n          // Create move history entries for different message types\n          const createHistoryDescription = (msg: WebSocketMessage) => {\n            switch (msg.type) {\n              case 'gameState':\n                return 'Game state updated';\n              case 'playerJoined':\n                return `${msg.player?.name || 'A player'} joined the game`;\n              case 'playerDisconnected':\n                return `Player disconnected from the game`;\n              case 'gameStarted':\n                return 'Game has started! First player draws ideology card';\n              case 'ideologyAnswered':\n                const playerName = msg.state?.players?.[msg.playerId]?.name || 'Player';\n                return `${playerName} answered ideology question as \"${msg.answer}\"`;\n              case 'votersInfluenced':\n                const influencerName = msg.state?.players?.[msg.playerId]?.name || 'Player';\n                return `${influencerName} influenced ${msg.voterCard?.voters || 0} voters`;\n              case 'votersPlaced':\n                const placerName = msg.state?.players?.[msg.playerId]?.name || 'Player';\n                const zoneName = msg.state?.zones?.find((z: any) => z.id === msg.zoneId)?.name || `Zone ${msg.zoneId}`;\n                return `${placerName} placed ${msg.voterCount} voters in ${zoneName}`;\n              case 'gerrymandered':\n                const gerryName = msg.state?.players?.[msg.playerId]?.name || 'Player';\n                const fromZone = msg.state?.zones?.find((z: any) => z.id === msg.fromZoneId)?.name || `Zone ${msg.fromZoneId}`;\n                const toZone = msg.state?.zones?.find((z: any) => z.id === msg.toZoneId)?.name || `Zone ${msg.toZoneId}`;\n                return `${gerryName} gerrymandered voter from ${fromZone} to ${toZone}`;\n              case 'turnEnded':\n                const nextPlayerName = msg.state?.players?.[msg.nextPlayer]?.name || 'Next Player';\n                return `Turn ended. ${nextPlayerName}'s turn begins`;\n              case 'headlineTriggered':\n                return `Headline triggered: ${msg.headline?.title || 'Unknown headline'}`;\n              case 'gameEnded':\n                const winnerName = msg.state?.players?.[msg.winner]?.name || 'Winner';\n                return `Game ended! ${winnerName} wins with ${msg.scores?.[msg.winner] || 0} majority voters`;\n              case 'error':\n                return `Error: ${msg.message}`;\n              default:\n                return `${msg.type} event occurred`;\n            }\n          };\n\n          // Add to move history for relevant events\n          if (!['gameState'].includes(message.type)) {\n            addToMoveHistory({\n              type: message.type,\n              description: createHistoryDescription(message),\n              playerId: message.playerId,\n              playerName: message.state?.players?.[message.playerId]?.name,\n              details: message.type === 'error' ? message.message : undefined\n            });\n          }\n\n          switch (message.type) {\n            case 'gameState':\n              setGameState(message.state);\n              setPlayerId(message.playerId);\n              break;\n            case 'playerJoined':\n            case 'playerDisconnected':\n            case 'gameStarted':\n            case 'ideologyAnswered':\n            case 'votersInfluenced':\n            case 'votersPlaced':\n            case 'gerrymandered':\n            case 'turnEnded':\n            case 'conspiracyPlayed':\n            case 'headlineTriggered':\n            case 'volatileEvent':\n            case 'gameEnded':\n              if (message.state) {\n                setGameState(message.state);\n              }\n              break;\n            case 'error':\n              const friendlyError = createUserFriendlyError(message.message, 'Server Error');\n              setError(friendlyError);\n              break;\n            default:\n              console.log('Unhandled message type:', message.type);\n              addToMoveHistory({\n                type: 'unknown',\n                description: `Unhandled event: ${message.type}`,\n                details: message\n              });\n          }\n        } catch (err) {\n          console.error('Error parsing WebSocket message:', err);\n          const friendlyError = createUserFriendlyError(err, 'Message Parsing Error');\n          setError(friendlyError);\n          \n          addToMoveHistory({\n            type: 'error',\n            description: 'Failed to parse server message',\n            details: friendlyError\n          });\n        }\n      };\n\n      socketRef.current.onerror = (error) => {\n        console.error('WebSocket error:', error);\n        const friendlyError = 'Connection error occurred. Please check your network connection.';\n        setError(friendlyError);\n        \n        addToMoveHistory({\n          type: 'error',\n          description: 'WebSocket connection error',\n          details: friendlyError\n        });\n      };\n\n      socketRef.current.onclose = (event) => {\n        console.log('WebSocket closed:', event.code, event.reason);\n        setConnectionStatus('disconnected');\n        \n        addToMoveHistory({\n          type: 'disconnected',\n          description: 'Disconnected from game server',\n          details: `Code: ${event.code}, Reason: ${event.reason || 'Unknown'}`\n        });\n        \n        // Attempt to reconnect if not a normal closure\n        if (event.code !== 1000 && reconnectAttempts.current < maxReconnectAttempts) {\n          const delay = Math.min(1000 * Math.pow(2, reconnectAttempts.current), 10000);\n          reconnectAttempts.current++;\n          \n          console.log(`Attempting to reconnect in ${delay}ms (attempt ${reconnectAttempts.current})`);\n          \n          addToMoveHistory({\n            type: 'reconnecting',\n            description: `Attempting to reconnect (${reconnectAttempts.current}/${maxReconnectAttempts})`,\n            details: `Delay: ${delay}ms`\n          });\n          \n          reconnectTimeoutRef.current = setTimeout(() => {\n            connect();\n          }, delay);\n        } else if (reconnectAttempts.current >= maxReconnectAttempts) {\n          const maxAttemptsError = 'Failed to reconnect after multiple attempts. Please refresh the page.';\n          setError(maxAttemptsError);\n          \n          addToMoveHistory({\n            type: 'error',\n            description: 'Reconnection failed',\n            details: maxAttemptsError\n          });\n        }\n      };\n    } catch (err) {\n      console.error('Failed to create WebSocket connection:', err);\n      const friendlyError = createUserFriendlyError(err, 'Connection Setup Failed');\n      setError(friendlyError);\n      setConnectionStatus('disconnected');\n      \n      addToMoveHistory({\n        type: 'error',\n        description: 'Failed to establish WebSocket connection',\n        details: friendlyError\n      });\n    }\n  }, [addToMoveHistory, createUserFriendlyError]);\n\n  const disconnect = useCallback(() => {\n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n      reconnectTimeoutRef.current = null;\n    }\n    \n    if (socketRef.current) {\n      socketRef.current.close(1000, 'User disconnected');\n      socketRef.current = null;\n    }\n    \n    setConnectionStatus('disconnected');\n    setGameState(null);\n    setPlayerId(null);\n  }, []);\n\n  const sendMessage = useCallback((message: any) => {\n    if (socketRef.current?.readyState === WebSocket.OPEN) {\n      try {\n        socketRef.current.send(JSON.stringify(message));\n        \n        // Add to move history for outgoing messages\n        addToMoveHistory({\n          type: `sent_${message.type}`,\n          description: `Sent ${message.type} command`,\n          details: message\n        });\n        \n        return true;\n      } catch (err) {\n        console.error('Failed to send message:', err);\n        const friendlyError = createUserFriendlyError(err, 'Failed to Send Message');\n        setError(friendlyError);\n        \n        addToMoveHistory({\n          type: 'error',\n          description: 'Failed to send message to server',\n          details: friendlyError\n        });\n        \n        return false;\n      }\n    } else {\n      console.warn('WebSocket is not connected');\n      const notConnectedError = 'Not connected to server. Please wait for connection or refresh the page.';\n      setError(notConnectedError);\n      \n      addToMoveHistory({\n        type: 'error',\n        description: 'Attempted to send message while disconnected',\n        details: notConnectedError\n      });\n      \n      return false;\n    }\n  }, [addToMoveHistory, createUserFriendlyError]);\n\n  // Auto-connect on mount\n  useEffect(() => {\n    connect();\n    \n    return () => {\n      disconnect();\n    };\n  }, [connect, disconnect]);\n\n  // Clear error after some time\n  useEffect(() => {\n    if (error) {\n      const timeout = setTimeout(() => {\n        setError(null);\n      }, 5000);\n      \n      return () => clearTimeout(timeout);\n    }\n  }, [error]);\n\n  return {\n    gameState,\n    playerId,\n    connectionStatus,\n    lastMessage,\n    error,\n    moveHistory,\n    sendMessage,\n    connect,\n    disconnect,\n    isConnected: connectionStatus === 'connected',\n    currentPlayer: gameState && playerId ? gameState.players[playerId] : null,\n    isCurrentTurn: gameState && playerId ? gameState.turnOrder[gameState.currentTurn] === playerId : false\n  };\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 358, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/Zone.tsx"],"sourcesContent":["import React from 'react';\n\ninterface ZoneProps {\n  zone: any;\n  isSelected: boolean;\n  isGerrymanderSource: boolean;\n  onClick: () => void;\n  canInteract: boolean;\n  players: Record<string, any>;\n}\n\nexport default function Zone({ \n  zone, \n  isSelected, \n  isGerrymanderSource, \n  onClick, \n  canInteract, \n  players \n}: ZoneProps) {\n  const getMajorityPlayerName = () => {\n    // Count voters by player\n    const playerVoterCounts: Record<string, number> = {};\n    zone.voters.forEach((voter: any) => {\n      playerVoterCounts[voter.playerId] = (playerVoterCounts[voter.playerId] || 0) + 1;\n    });\n    \n    // Find player with majority\n    const majorityPlayer = Object.entries(playerVoterCounts).find(\n      ([playerId, count]) => count >= zone.majorityRequired\n    );\n    \n    if (majorityPlayer && players[majorityPlayer[0]]) {\n      return players[majorityPlayer[0]].name;\n    }\n    return null;\n  };\n\n  const getMajorityVoters = () => {\n    const playerVoterCounts: Record<string, number> = {};\n    zone.voters.forEach((voter: any) => {\n      if (voter.isMajority) {\n        playerVoterCounts[voter.playerId] = (playerVoterCounts[voter.playerId] || 0) + 1;\n      }\n    });\n    return playerVoterCounts;\n  };\n\n  const getPlayerVoterCounts = () => {\n    const playerVoterCounts: Record<string, number> = {};\n    zone.voters.forEach((voter: any) => {\n      playerVoterCounts[voter.playerId] = (playerVoterCounts[voter.playerId] || 0) + 1;\n    });\n    return playerVoterCounts;\n  };\n\n  const getZoneClasses = () => {\n    let classes = 'p-4 border-2 rounded-xl transition-all duration-300 cursor-pointer relative overflow-hidden ';\n    \n    if (isSelected) {\n      classes += 'border-primary bg-primary/10 shadow-lg scale-105 ';\n    } else if (isGerrymanderSource) {\n      classes += 'border-yellow-500 bg-yellow-500/10 shadow-md ';\n    } else if (zone.volatileAreas && zone.volatileAreas.length > 0) {\n      classes += 'border-destructive/50 bg-destructive/5 ';\n    } else {\n      classes += 'border-border bg-card hover:bg-muted/20 ';\n    }\n    \n    if (canInteract) {\n      classes += 'hover:border-primary/50 hover:shadow-md hover:scale-102 ';\n    } else {\n      classes += 'opacity-60 cursor-not-allowed ';\n    }\n    \n    // Check if any player has majority\n    const majorityVoters = getMajorityVoters();\n    if (Object.keys(majorityVoters).length > 0) {\n      classes += 'ring-2 ring-primary/30 ';\n    }\n    \n    return classes;\n  };\n\n  const majorityPlayerName = getMajorityPlayerName();\n  const playerVoterCounts = getPlayerVoterCounts();\n  const hasVoters = zone.voters.length > 0;\n  const isFull = zone.voters.length >= zone.maxVoters;\n  const progressPercentage = (zone.voters.length / zone.maxVoters) * 100;\n\n  return (\n    <div\n      className={getZoneClasses()}\n      onClick={canInteract ? onClick : undefined}\n    >\n      {/* Background Pattern */}\n      <div className=\"absolute inset-0 opacity-5\">\n        <div className=\"w-full h-full bg-gradient-to-br from-primary/20 to-transparent\"></div>\n      </div>\n\n      <div className=\"relative space-y-3\">\n        {/* Zone Header */}\n        <div className=\"flex justify-between items-start\">\n          <h3 className=\"font-bold text-sm text-foreground\">{zone.name}</h3>\n          <div className=\"flex flex-col items-end space-y-1\">\n            {zone.volatileAreas && zone.volatileAreas.length > 0 && (\n              <span className=\"text-xs bg-destructive text-destructive-foreground px-2 py-1 rounded-full font-medium\">\n                ⚠️ Volatile\n              </span>\n            )}\n            {isFull && (\n              <span className=\"text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full font-medium\">\n                Full\n              </span>\n            )}\n          </div>\n        </div>\n\n        {/* Voter Count Display */}\n        <div className=\"text-center space-y-2\">\n          <div className=\"relative\">\n            <div className=\"text-3xl font-bold text-primary\">\n              {zone.voters.length}\n            </div>\n            <div className=\"text-xs text-muted-foreground\">\n              of {zone.maxVoters} voters\n            </div>\n          </div>\n          \n          {/* Progress Bar */}\n          <div className=\"w-full bg-muted rounded-full h-2\">\n            <div \n              className=\"bg-primary h-2 rounded-full transition-all duration-500\"\n              style={{ width: `${progressPercentage}%` }}\n            ></div>\n          </div>\n          \n          <div className=\"text-xs text-muted-foreground\">\n            Need <span className=\"font-semibold text-primary\">{zone.majorityRequired}</span> for majority\n          </div>\n        </div>\n\n        {/* Player Distribution */}\n        {hasVoters && (\n          <div className=\"space-y-2\">\n            <div className=\"text-xs font-medium text-muted-foreground text-center\">\n              Player Distribution\n            </div>\n            <div className=\"space-y-1\">\n              {Object.entries(playerVoterCounts).map(([playerId, count]) => (\n                <div key={playerId} className=\"flex justify-between items-center text-xs\">\n                  <span className={`font-medium ${\n                    majorityPlayerName === players[playerId]?.name ? 'text-primary' : 'text-muted-foreground'\n                  }`}>\n                    {players[playerId]?.name || 'Unknown'}\n                  </span>\n                  <span className={`font-bold ${\n                    count >= zone.majorityRequired ? 'text-primary' : 'text-foreground'\n                  }`}>\n                    {count}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Majority Control */}\n        <div className=\"text-center\">\n          <div className=\"text-xs text-muted-foreground mb-1\">\n            Zone Control\n          </div>\n          <div className={`text-sm font-bold ${\n            majorityPlayerName ? 'text-primary' : 'text-muted-foreground'\n          }`}>\n            {majorityPlayerName || 'Contested'}\n          </div>\n        </div>\n\n        {/* Zone Status Indicators */}\n        <div className=\"flex justify-center space-x-1\">\n          {isSelected && (\n            <span className=\"text-xs bg-primary text-primary-foreground px-2 py-1 rounded-full font-medium animate-pulse\">\n              Selected\n            </span>\n          )}\n          {isGerrymanderSource && (\n            <span className=\"text-xs bg-yellow-500 text-white px-2 py-1 rounded-full font-medium\">\n              Source\n            </span>\n          )}\n        </div>\n\n        {/* Interactive Hint */}\n        {canInteract && (\n          <div className=\"text-xs text-center text-primary font-medium opacity-75\">\n            Click to interact →\n          </div>\n        )}\n        \n        {!canInteract && !isSelected && !isGerrymanderSource && (\n          <div className=\"text-xs text-center text-muted-foreground\">\n            {zone.voters.length === 0 ? 'No voters placed' : 'Zone occupied'}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 698, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/GameBoard.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport Zone from './Zone';\n\ninterface GameBoardProps {\n  gameState: any;\n  sendMessage: (msg: any) => void;\n  isCurrentTurn: boolean;\n  playerId: string | null;\n}\n\nexport default function GameBoard({ gameState, sendMessage, isCurrentTurn, playerId }: GameBoardProps) {\n  const [selectedZone, setSelectedZone] = useState<number | null>(null);\n  const [actionMode, setActionMode] = useState<'place' | 'gerrymander' | null>(null);\n  const [gerrymanderFrom, setGerrymanderFrom] = useState<number | null>(null);\n\n  if (!gameState || !gameState.zones) {\n    return (\n      <div className=\"bg-card border rounded-lg p-6 shadow-sm\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"text-center space-y-3\">\n            <div className=\"text-4xl\">🎲</div>\n            <p className=\"text-muted-foreground\">Loading game board...</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const handleZoneClick = (zoneId: number) => {\n    if (!isCurrentTurn) return;\n\n    if (actionMode === 'place') {\n      setSelectedZone(zoneId);\n    } else if (actionMode === 'gerrymander') {\n      if (!gerrymanderFrom) {\n        setGerrymanderFrom(zoneId);\n      } else if (gerrymanderFrom !== zoneId) {\n        setSelectedZone(zoneId);\n      }\n    } else {\n      setSelectedZone(zoneId);\n    }\n  };\n\n  const handlePlaceVoters = (amount: number, volatileArea: boolean = false) => {\n    if (selectedZone && amount > 0) {\n      sendMessage({\n        type: 'placeVoters',\n        zoneId: selectedZone,\n        voterCount: amount,\n        volatileArea: volatileArea\n      });\n      setSelectedZone(null);\n      setActionMode(null);\n    }\n  };\n\n  const handleGerrymander = () => {\n    if (gerrymanderFrom && selectedZone) {\n      sendMessage({\n        type: 'gerrymander',\n        fromZoneId: gerrymanderFrom,\n        toZoneId: selectedZone\n      });\n      setGerrymanderFrom(null);\n      setSelectedZone(null);\n      setActionMode(null);\n    }\n  };\n\n  const cancelAction = () => {\n    setSelectedZone(null);\n    setActionMode(null);\n    setGerrymanderFrom(null);\n  };\n\n  const currentPlayer = playerId ? gameState.players[playerId] : null;\n  const hasGerrymanderingRights = currentPlayer?.gerrymanderingRights?.length > 0;\n\n  const getActionModeDescription = () => {\n    if (actionMode === 'place') return 'Click a zone to place voters there';\n    if (actionMode === 'gerrymander') {\n      if (!gerrymanderFrom) return 'Click a zone you control to move voters from';\n      return 'Click an adjacent zone to move voters to';\n    }\n    return 'Select an action to interact with zones';\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Action Controls */}\n      {isCurrentTurn && (\n        <div className=\"bg-card border rounded-lg p-6 shadow-sm\">\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <h3 className=\"text-xl font-bold tracking-tight\">Board Actions</h3>\n              <p className=\"text-sm text-muted-foreground\">{getActionModeDescription()}</p>\n            </div>\n            \n            <div className=\"flex flex-wrap gap-3\">\n              <button\n                onClick={() => setActionMode('place')}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${\n                  actionMode === 'place'\n                    ? 'bg-primary text-primary-foreground shadow-md'\n                    : 'bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-sm'\n                }`}\n              >\n                📍 Place Voters\n              </button>\n              \n              <button\n                onClick={() => setActionMode('gerrymander')}\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${\n                  actionMode === 'gerrymander'\n                    ? 'bg-primary text-primary-foreground shadow-md'\n                    : hasGerrymanderingRights \n                      ? 'bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-sm'\n                      : 'bg-muted text-muted-foreground cursor-not-allowed'\n                }`}\n                disabled={!hasGerrymanderingRights}\n              >\n                🔄 Gerrymander \n                {hasGerrymanderingRights ? ` (${currentPlayer.gerrymanderingRights.length})` : ' (No rights)'}\n              </button>\n              \n              {(actionMode || selectedZone) && (\n                <button\n                  onClick={cancelAction}\n                  className=\"px-4 py-2 bg-destructive text-destructive-foreground rounded-lg text-sm font-medium hover:bg-destructive/90 transition-all duration-200\"\n                >\n                  ✕ Cancel\n                </button>\n              )}\n            </div>\n            \n            {actionMode === 'gerrymander' && gerrymanderFrom && !selectedZone && (\n              <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                <p className=\"text-sm text-yellow-800\">\n                  ✓ Source zone selected. Now click an adjacent zone to move voters to.\n                </p>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Game Board */}\n      <div className=\"bg-card border rounded-lg p-6 shadow-sm\">\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <h3 className=\"text-xl font-bold tracking-tight\">SHASN Political Map</h3>\n            <p className=\"text-sm text-muted-foreground\">9 zones representing different regions of the political landscape</p>\n          </div>\n          \n          <div className=\"grid grid-cols-3 gap-4 p-4 bg-muted/10 rounded-lg\">\n            {gameState.zones.map((zone: any) => (\n              <Zone\n                key={zone.id}\n                zone={zone}\n                isSelected={selectedZone === zone.id}\n                isGerrymanderSource={gerrymanderFrom === zone.id}\n                onClick={() => handleZoneClick(zone.id)}\n                canInteract={isCurrentTurn && (actionMode !== null)}\n                players={gameState.players}\n              />\n            ))}\n          </div>\n          \n          {!isCurrentTurn && (\n            <div className=\"text-center p-4 bg-muted/20 rounded-lg\">\n              <p className=\"text-sm text-muted-foreground\">\n                Wait for your turn to interact with the board\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Action Dialog */}\n      {selectedZone && actionMode === 'place' && (\n        <VoterPlacementDialog\n          zone={gameState.zones.find((z: any) => z.id === selectedZone)}\n          onConfirm={handlePlaceVoters}\n          onCancel={cancelAction}\n        />\n      )}\n\n      {selectedZone && actionMode === 'gerrymander' && gerrymanderFrom && (\n        <GerrymanderDialog\n          fromZone={gameState.zones.find((z: any) => z.id === gerrymanderFrom)}\n          toZone={gameState.zones.find((z: any) => z.id === selectedZone)}\n          onConfirm={handleGerrymander}\n          onCancel={cancelAction}\n        />\n      )}\n    </div>\n  );\n}\n\n// Voter Placement Dialog Component\nfunction VoterPlacementDialog({ \n  zone, \n  onConfirm, \n  onCancel \n}: {\n  zone: any;\n  onConfirm: (amount: number, volatileArea?: boolean) => void;\n  onCancel: () => void;\n}) {\n  const [amount, setAmount] = useState(1);\n  const [volatileArea, setVolatileArea] = useState(false);\n\n  const maxVoters = zone.maxVoters - zone.voters.length;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n      <div className=\"bg-card p-6 rounded-lg max-w-md w-full mx-4 shadow-xl border\">\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <h3 className=\"text-xl font-bold tracking-tight\">Place Voters</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Deploying voters in <span className=\"font-semibold text-foreground\">{zone.name}</span>\n            </p>\n          </div>\n          \n          <div className=\"p-4 bg-muted/20 rounded-lg space-y-2\">\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-muted-foreground\">Current voters:</span>\n              <span className=\"font-medium\">{zone.voters.length}/{zone.maxVoters}</span>\n            </div>\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-muted-foreground\">Majority needed:</span>\n              <span className=\"font-medium text-primary\">{zone.majorityRequired}</span>\n            </div>\n            <div className=\"flex justify-between text-sm\">\n              <span className=\"text-muted-foreground\">Available slots:</span>\n              <span className=\"font-medium\">{maxVoters}</span>\n            </div>\n          </div>\n          \n          <div className=\"space-y-3\">\n            <div>\n              <label className=\"block text-sm font-semibold mb-2\">\n                Number of voters to place:\n              </label>\n              <input\n                type=\"number\"\n                min=\"1\"\n                max={maxVoters}\n                value={amount}\n                onChange={(e) => setAmount(Math.max(1, Math.min(maxVoters, parseInt(e.target.value) || 1)))}\n                className=\"w-full px-3 py-2 border-2 rounded-lg bg-background focus:border-primary focus:outline-none transition-colors\"\n              />\n            </div>\n\n            {zone.volatileAreas && zone.volatileAreas.length > 0 && (\n              <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                <div className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"volatileArea\"\n                    checked={volatileArea}\n                    onChange={(e) => setVolatileArea(e.target.checked)}\n                    className=\"rounded\"\n                  />\n                  <label htmlFor=\"volatileArea\" className=\"text-sm font-medium text-yellow-800\">\n                    Place in volatile area\n                  </label>\n                </div>\n                <p className=\"text-xs text-yellow-700 mt-1\">\n                  ⚠️ This will trigger a headline event\n                </p>\n              </div>\n            )}\n            \n            <div className=\"flex space-x-3 pt-2\">\n              <button\n                onClick={() => onConfirm(amount, volatileArea)}\n                disabled={amount > maxVoters || amount < 1}\n                className=\"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium\"\n              >\n                Place {amount} Voter{amount !== 1 ? 's' : ''}\n              </button>\n              <button\n                onClick={onCancel}\n                className=\"flex-1 px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/80 transition-colors font-medium\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Gerrymander Dialog Component\nfunction GerrymanderDialog({ \n  fromZone, \n  toZone, \n  onConfirm, \n  onCancel \n}: {\n  fromZone: any;\n  toZone: any;\n  onConfirm: () => void;\n  onCancel: () => void;\n}) {\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n      <div className=\"bg-card p-6 rounded-lg max-w-md w-full mx-4 shadow-xl border\">\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <h3 className=\"text-xl font-bold tracking-tight\">Gerrymander Voters</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Redistribute voters between zones\n            </p>\n          </div>\n          \n          <div className=\"space-y-3\">\n            <div className=\"p-4 bg-muted/20 rounded-lg\">\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm font-medium\">From:</span>\n                  <span className=\"font-semibold\">{fromZone.name}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm font-medium\">To:</span>\n                  <span className=\"font-semibold\">{toZone.name}</span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-sm font-medium\">Moving:</span>\n                  <span className=\"font-semibold text-primary\">1 non-majority voter</span>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"p-3 bg-yellow-50 border border-yellow-200 rounded-lg\">\n              <p className=\"text-sm text-yellow-800\">\n                <span className=\"font-medium\">Note:</span> Only non-majority voters can be moved. Voters in volatile areas cannot be gerrymandered.\n              </p>\n            </div>\n            \n            <div className=\"flex space-x-3 pt-2\">\n              <button\n                onClick={onConfirm}\n                className=\"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium\"\n              >\n                Confirm Gerrymander\n              </button>\n              <button\n                onClick={onCancel}\n                className=\"flex-1 px-4 py-2 bg-secondary text-secondary-foreground rounded-lg hover:bg-secondary/80 transition-colors font-medium\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1497, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/ResourcePanel.tsx"],"sourcesContent":["import React from 'react';\n\ninterface ResourcePanelProps {\n  gameState: any;\n  currentPlayer: any;\n  playerId: string | null;\n}\n\nexport default function ResourcePanel({ gameState, currentPlayer, playerId }: ResourcePanelProps) {\n  if (!gameState || !currentPlayer) {\n    return null;\n  }\n\n  const allPlayers = Object.values(gameState.players);\n\n  const getResourceBadge = (resource: string) => {\n    const badges = {\n      funds: { label: 'Funds', color: 'bg-blue-100 text-blue-800' },\n      clout: { label: 'Clout', color: 'bg-red-100 text-red-800' },\n      media: { label: 'Media', color: 'bg-purple-100 text-purple-800' },\n      trust: { label: 'Trust', color: 'bg-green-100 text-green-800' }\n    };\n    return badges[resource as keyof typeof badges] || { label: resource, color: 'bg-gray-100 text-gray-800' };\n  };\n\n  const getResourceName = (resource: string) => {\n    const names = {\n      funds: 'Campaign Funds',\n      clout: 'Street Clout',\n      media: 'Media Attention', \n      trust: 'Public Trust'\n    };\n    return names[resource as keyof typeof names] || resource;\n  };\n\n  const getMajorityPlayer = (zone: any) => {\n    const playerVoterCounts: Record<string, number> = {};\n    zone.voters.forEach((voter: any) => {\n      playerVoterCounts[voter.playerId] = (playerVoterCounts[voter.playerId] || 0) + 1;\n    });\n    \n    const majorityPlayer = Object.entries(playerVoterCounts).find(\n      ([playerId, count]) => count >= zone.majorityRequired\n    );\n    \n    if (majorityPlayer && gameState.players[majorityPlayer[0]]) {\n      return gameState.players[majorityPlayer[0]].name;\n    }\n    return null;\n  };\n\n  return (\n    <div className=\"bg-card border rounded-lg p-6 shadow-sm\">\n      <div className=\"space-y-2 mb-6\">\n        <h2 className=\"text-2xl font-bold tracking-tight\">Player Resources</h2>\n        <p className=\"text-sm text-muted-foreground\">Current game status and player standings</p>\n      </div>\n      \n      <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4 mb-6\">\n        {allPlayers.map((player: any) => (\n          <div\n            key={player.id}\n            className={`p-4 border-2 rounded-lg transition-all ${\n              player.id === playerId \n                ? 'border-primary bg-primary/5 shadow-md' \n                : 'border-border hover:border-muted-foreground/30'\n            }`}\n          >\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className={`font-bold text-lg ${\n                player.id === playerId ? 'text-primary' : 'text-foreground'\n              }`}>\n                {player.name}\n                {player.id === playerId && <span className=\"text-xs ml-2 font-normal\">(You)</span>}\n              </h3>\n              {gameState.turnOrder[gameState.currentTurn] === player.id && (\n                <span className=\"text-xs bg-primary text-primary-foreground px-2 py-1 rounded-full font-medium\">\n                  Active Turn\n                </span>\n              )}\n            </div>\n            \n            <div className=\"space-y-3\">\n              {/* SHASN Resources */}\n              <div className=\"space-y-2\">\n                <h4 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide\">Resources</h4>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {Object.entries(player.resources || {}).map(([resource, amount]) => {\n                    const badge = getResourceBadge(resource);\n                    return (\n                      <div key={resource} className=\"flex items-center justify-between\">\n                        <span className={`text-xs px-2 py-1 rounded-full font-medium ${badge.color}`}>\n                          {badge.label}\n                        </span>\n                        <span className=\"font-bold text-sm\">{amount as number}</span>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n              \n              {/* Key Stats */}\n              <div className=\"space-y-2\">\n                <h4 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide\">Stats</h4>\n                <div className=\"space-y-1\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Resource Cap:</span>\n                    <span className=\"font-medium\">{player.resourceCap || 12}</span>\n                  </div>\n                  <div className=\"flex justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Majority Voters:</span>\n                    <span className=\"font-bold text-primary\">{player.majorityVoters || 0}</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Ideology Cards */}\n              {player.ideologyCards && player.ideologyCards.length > 0 && (\n                <div className=\"space-y-2\">\n                  <h4 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide\">Ideologies</h4>\n                  <div className=\"flex flex-wrap gap-1\">\n                    {Object.entries(player.ideologuePowers || {}).map(([ideologue, power]: [string, any]) => (\n                      power.cards > 0 && (\n                        <span\n                          key={ideologue}\n                          className=\"text-xs bg-secondary text-secondary-foreground px-2 py-1 rounded-full font-medium\"\n                        >\n                          {ideologue.charAt(0).toUpperCase() + ideologue.slice(1)}: {power.cards}\n                        </span>\n                      )\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Gerrymandering Rights */}\n              {player.gerrymanderingRights && player.gerrymanderingRights.length > 0 && (\n                <div className=\"space-y-1\">\n                  <h4 className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wide\">Special Powers</h4>\n                  <div className=\"text-sm\">\n                    <span className=\"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium\">\n                      Gerrymander: {player.gerrymanderingRights.length} zones\n                    </span>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* Zone Control Summary */}\n      <div className=\"pt-6 border-t\">\n        <div className=\"space-y-2 mb-4\">\n          <h3 className=\"text-xl font-bold tracking-tight\">Board Control</h3>\n          <p className=\"text-sm text-muted-foreground\">Zone status and majority control</p>\n        </div>\n        \n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\n          {gameState.zones.map((zone: any) => {\n            const majorityPlayer = getMajorityPlayer(zone);\n            return (\n              <div key={zone.id} className=\"p-3 border rounded-lg bg-muted/20 hover:bg-muted/30 transition-colors\">\n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between items-start\">\n                    <h4 className=\"font-semibold text-sm\">{zone.name}</h4>\n                    {zone.volatileAreas && zone.volatileAreas.length > 0 && (\n                      <span className=\"text-xs bg-destructive text-destructive-foreground px-2 py-1 rounded-full\">\n                        Volatile\n                      </span>\n                    )}\n                  </div>\n                  \n                  <div className=\"text-xs space-y-1\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Voters:</span>\n                      <span className=\"font-medium\">{zone.voters.length}/{zone.maxVoters}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Majority:</span>\n                      <span className=\"font-medium\">{zone.majorityRequired}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-muted-foreground\">Control:</span>\n                      <span className={`font-medium ${majorityPlayer ? 'text-primary' : 'text-muted-foreground'}`}>\n                        {majorityPlayer || 'None'}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAQe,SAAS,cAAc,EAAE,SAAS,EAAE,aAAa,EAAE,QAAQ,EAAsB;IAC9F,IAAI,CAAC,aAAa,CAAC,eAAe;QAChC,OAAO;IACT;IAEA,MAAM,aAAa,OAAO,MAAM,CAAC,UAAU,OAAO;IAElD,MAAM,mBAAmB,CAAC;QACxB,MAAM,SAAS;YACb,OAAO;gBAAE,OAAO;gBAAS,OAAO;YAA4B;YAC5D,OAAO;gBAAE,OAAO;gBAAS,OAAO;YAA0B;YAC1D,OAAO;gBAAE,OAAO;gBAAS,OAAO;YAAgC;YAChE,OAAO;gBAAE,OAAO;gBAAS,OAAO;YAA8B;QAChE;QACA,OAAO,MAAM,CAAC,SAAgC,IAAI;YAAE,OAAO;YAAU,OAAO;QAA4B;IAC1G;IAEA,MAAM,kBAAkB,CAAC;QACvB,MAAM,QAAQ;YACZ,OAAO;YACP,OAAO;YACP,OAAO;YACP,OAAO;QACT;QACA,OAAO,KAAK,CAAC,SAA+B,IAAI;IAClD;IAEA,MAAM,oBAAoB,CAAC;QACzB,MAAM,oBAA4C,CAAC;QACnD,KAAK,MAAM,CAAC,OAAO,CAAC,CAAC;YACnB,iBAAiB,CAAC,MAAM,QAAQ,CAAC,GAAG,CAAC,iBAAiB,CAAC,MAAM,QAAQ,CAAC,IAAI,CAAC,IAAI;QACjF;QAEA,MAAM,iBAAiB,OAAO,OAAO,CAAC,mBAAmB,IAAI,CAC3D,CAAC,CAAC,UAAU,MAAM,GAAK,SAAS,KAAK,gBAAgB;QAGvD,IAAI,kBAAkB,UAAU,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE;YAC1D,OAAO,UAAU,OAAO,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,IAAI;QAClD;QACA,OAAO;IACT;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAoC;;;;;;kCAClD,6LAAC;wBAAE,WAAU;kCAAgC;;;;;;;;;;;;0BAG/C,6LAAC;gBAAI,WAAU;0BACZ,WAAW,GAAG,CAAC,CAAC,uBACf,6LAAC;wBAEC,WAAW,CAAC,uCAAuC,EACjD,OAAO,EAAE,KAAK,WACV,0CACA,kDACJ;;0CAEF,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAW,CAAC,kBAAkB,EAChC,OAAO,EAAE,KAAK,WAAW,iBAAiB,mBAC1C;;4CACC,OAAO,IAAI;4CACX,OAAO,EAAE,KAAK,0BAAY,6LAAC;gDAAK,WAAU;0DAA2B;;;;;;;;;;;;oCAEvE,UAAU,SAAS,CAAC,UAAU,WAAW,CAAC,KAAK,OAAO,EAAE,kBACvD,6LAAC;wCAAK,WAAU;kDAAgF;;;;;;;;;;;;0CAMpG,6LAAC;gCAAI,WAAU;;kDAEb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAAsE;;;;;;0DACpF,6LAAC;gDAAI,WAAU;0DACZ,OAAO,OAAO,CAAC,OAAO,SAAS,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,UAAU,OAAO;oDAC7D,MAAM,QAAQ,iBAAiB;oDAC/B,qBACE,6LAAC;wDAAmB,WAAU;;0EAC5B,6LAAC;gEAAK,WAAW,CAAC,2CAA2C,EAAE,MAAM,KAAK,EAAE;0EACzE,MAAM,KAAK;;;;;;0EAEd,6LAAC;gEAAK,WAAU;0EAAqB;;;;;;;uDAJ7B;;;;;gDAOd;;;;;;;;;;;;kDAKJ,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAAsE;;;;;;0DACpF,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAK,WAAU;0EAAwB;;;;;;0EACxC,6LAAC;gEAAK,WAAU;0EAAe,OAAO,WAAW,IAAI;;;;;;;;;;;;kEAEvD,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAK,WAAU;0EAAwB;;;;;;0EACxC,6LAAC;gEAAK,WAAU;0EAA0B,OAAO,cAAc,IAAI;;;;;;;;;;;;;;;;;;;;;;;;oCAMxE,OAAO,aAAa,IAAI,OAAO,aAAa,CAAC,MAAM,GAAG,mBACrD,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAAsE;;;;;;0DACpF,6LAAC;gDAAI,WAAU;0DACZ,OAAO,OAAO,CAAC,OAAO,eAAe,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,WAAW,MAAqB,GAClF,MAAM,KAAK,GAAG,mBACZ,6LAAC;wDAEC,WAAU;;4DAET,UAAU,MAAM,CAAC,GAAG,WAAW,KAAK,UAAU,KAAK,CAAC;4DAAG;4DAAG,MAAM,KAAK;;uDAHjE;;;;;;;;;;;;;;;;oCAYhB,OAAO,oBAAoB,IAAI,OAAO,oBAAoB,CAAC,MAAM,GAAG,mBACnE,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DAAsE;;;;;;0DACpF,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDAAK,WAAU;;wDAA2E;wDAC3E,OAAO,oBAAoB,CAAC,MAAM;wDAAC;;;;;;;;;;;;;;;;;;;;;;;;;uBAhFtD,OAAO,EAAE;;;;;;;;;;0BA2FpB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,6LAAC;gCAAE,WAAU;0CAAgC;;;;;;;;;;;;kCAG/C,6LAAC;wBAAI,WAAU;kCACZ,UAAU,KAAK,CAAC,GAAG,CAAC,CAAC;4BACpB,MAAM,iBAAiB,kBAAkB;4BACzC,qBACE,6LAAC;gCAAkB,WAAU;0CAC3B,cAAA,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAG,WAAU;8DAAyB,KAAK,IAAI;;;;;;gDAC/C,KAAK,aAAa,IAAI,KAAK,aAAa,CAAC,MAAM,GAAG,mBACjD,6LAAC;oDAAK,WAAU;8DAA4E;;;;;;;;;;;;sDAMhG,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAK,WAAU;sEAAwB;;;;;;sEACxC,6LAAC;4DAAK,WAAU;;gEAAe,KAAK,MAAM,CAAC,MAAM;gEAAC;gEAAE,KAAK,SAAS;;;;;;;;;;;;;8DAEpE,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAK,WAAU;sEAAwB;;;;;;sEACxC,6LAAC;4DAAK,WAAU;sEAAe,KAAK,gBAAgB;;;;;;;;;;;;8DAEtD,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DAAK,WAAU;sEAAwB;;;;;;sEACxC,6LAAC;4DAAK,WAAW,CAAC,YAAY,EAAE,iBAAiB,iBAAiB,yBAAyB;sEACxF,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;;+BAvBnB,KAAK,EAAE;;;;;wBA8BrB;;;;;;;;;;;;;;;;;;AAKV;KA7LwB","debugId":null}},
    {"offset": {"line": 2031, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/NegotiationPanel.tsx"],"sourcesContent":["import React, { useState } from 'react';\n\ninterface NegotiationPanelProps {\n  sendMessage: (msg: any) => void;\n  players: Record<string, any>;\n  currentPlayerId: string | null;\n}\n\nexport default function NegotiationPanel({ sendMessage, players, currentPlayerId }: NegotiationPanelProps) {\n  const [proposal, setProposal] = useState('');\n  const [targetPlayer, setTargetPlayer] = useState<string>('');\n  const [proposalType, setProposalType] = useState<'trade' | 'coalition' | 'general'>('general');\n  const [showConfirmation, setShowConfirmation] = useState(false);\n\n  const otherPlayers = Object.values(players).filter(player => player.id !== currentPlayerId);\n\n  const handleSubmitProposal = () => {\n    if (!proposal.trim()) return;\n\n    const negotiationData = {\n      type: 'negotiate',\n      proposal: {\n        text: proposal,\n        proposalType: proposalType,\n        from: currentPlayerId,\n        to: targetPlayer || null,\n        timestamp: Date.now()\n      },\n      targetPlayer: targetPlayer || null\n    };\n\n    sendMessage(negotiationData);\n    setProposal('');\n    setShowConfirmation(true);\n    \n    // Hide confirmation after 2 seconds\n    setTimeout(() => setShowConfirmation(false), 2000);\n  };\n\n  const handleQuickProposal = (type: 'alliance' | 'trade' | 'ceasefire') => {\n    let quickText = '';\n    switch (type) {\n      case 'alliance':\n        quickText = 'I propose we form an alliance to control more zones together. We can coordinate our voter placements and share information about upcoming moves.';\n        break;\n      case 'trade':\n        quickText = 'I want to trade resources with you. What resources do you need? I can offer a fair exchange that benefits both of us.';\n        break;\n      case 'ceasefire':\n        quickText = 'Let\\'s agree to a temporary ceasefire in contested zones. We can focus on other areas while avoiding direct conflict.';\n        break;\n    }\n    setProposal(quickText);\n    setProposalType(type === 'trade' ? 'trade' : 'coalition');\n  };\n\n  const getProposalTypeColor = (type: string) => {\n    const colors = {\n      general: 'bg-gray-100 text-gray-800',\n      trade: 'bg-blue-100 text-blue-800',\n      coalition: 'bg-green-100 text-green-800'\n    };\n    return colors[type as keyof typeof colors] || colors.general;\n  };\n\n  return (\n    <div className=\"bg-card border rounded-lg p-6 shadow-sm space-y-6\">\n      <div className=\"space-y-2\">\n        <h3 className=\"text-xl font-bold tracking-tight\">Negotiation & Diplomacy</h3>\n        <p className=\"text-sm text-muted-foreground\">Build alliances and make strategic deals</p>\n      </div>\n      \n      {/* Confirmation Message */}\n      {showConfirmation && (\n        <div className=\"p-3 bg-green-100 border border-green-200 rounded-lg\">\n          <p className=\"text-sm text-green-800 font-medium\">✓ Proposal sent successfully!</p>\n        </div>\n      )}\n\n      {/* Proposal Type Selection */}\n      <div className=\"space-y-2\">\n        <label className=\"block text-sm font-semibold text-foreground\">Proposal Type:</label>\n        <select\n          value={proposalType}\n          onChange={(e) => setProposalType(e.target.value as 'trade' | 'coalition' | 'general')}\n          className=\"w-full px-3 py-2 border-2 rounded-lg bg-background text-sm focus:border-primary focus:outline-none transition-colors\"\n        >\n          <option value=\"general\">General Discussion</option>\n          <option value=\"trade\">Resource Trade</option>\n          <option value=\"coalition\">Coalition Building</option>\n        </select>\n        <span className={`inline-block px-2 py-1 rounded-full text-xs font-medium ${getProposalTypeColor(proposalType)}`}>\n          {proposalType.charAt(0).toUpperCase() + proposalType.slice(1)} Proposal\n        </span>\n      </div>\n\n      {/* Target Player Selection */}\n      <div className=\"space-y-2\">\n        <label className=\"block text-sm font-semibold text-foreground\">Target Player:</label>\n        <select\n          value={targetPlayer}\n          onChange={(e) => setTargetPlayer(e.target.value)}\n          className=\"w-full px-3 py-2 border-2 rounded-lg bg-background text-sm focus:border-primary focus:outline-none transition-colors\"\n        >\n          <option value=\"\">All Players (Public)</option>\n          {otherPlayers.map((player) => (\n            <option key={player.id} value={player.id}>\n              {player.name} (Private)\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {/* Quick Proposal Buttons */}\n      <div className=\"space-y-3\">\n        <label className=\"block text-sm font-semibold text-foreground\">Quick Proposals:</label>\n        <div className=\"grid grid-cols-1 gap-3\">\n          <button\n            onClick={() => handleQuickProposal('alliance')}\n            className=\"p-3 text-sm bg-green-50 text-green-700 border border-green-200 rounded-lg hover:bg-green-100 transition-colors text-left\"\n          >\n            <div className=\"font-medium\">🤝 Propose Alliance</div>\n            <div className=\"text-xs text-green-600 mt-1\">Form a strategic partnership</div>\n          </button>\n          <button\n            onClick={() => handleQuickProposal('trade')}\n            className=\"p-3 text-sm bg-blue-50 text-blue-700 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors text-left\"\n          >\n            <div className=\"font-medium\">💱 Trade Resources</div>\n            <div className=\"text-xs text-blue-600 mt-1\">Exchange resources for mutual benefit</div>\n          </button>\n          <button\n            onClick={() => handleQuickProposal('ceasefire')}\n            className=\"p-3 text-sm bg-yellow-50 text-yellow-700 border border-yellow-200 rounded-lg hover:bg-yellow-100 transition-colors text-left\"\n          >\n            <div className=\"font-medium\">🕊️ Propose Ceasefire</div>\n            <div className=\"text-xs text-yellow-600 mt-1\">Temporary non-aggression pact</div>\n          </button>\n        </div>\n      </div>\n\n      {/* Custom Proposal Input */}\n      <div className=\"space-y-2\">\n        <label className=\"block text-sm font-semibold text-foreground\">Custom Proposal:</label>\n        <textarea\n          value={proposal}\n          onChange={(e) => setProposal(e.target.value)}\n          placeholder=\"Enter your negotiation proposal... Be specific about terms, conditions, and what you're offering in return.\"\n          className=\"w-full px-3 py-3 border-2 rounded-lg bg-background text-sm resize-none focus:border-primary focus:outline-none transition-colors\"\n          rows={4}\n        />\n        <div className=\"flex justify-between text-xs text-muted-foreground\">\n          <span>{proposal.length}/500 characters</span>\n          <span>{proposal.trim() ? 'Ready to send' : 'Enter proposal text'}</span>\n        </div>\n      </div>\n\n      {/* Submit Button */}\n      <button\n        onClick={handleSubmitProposal}\n        disabled={!proposal.trim()}\n        className=\"w-full px-4 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium\"\n      >\n        {targetPlayer ? `Send Private Proposal to ${players[targetPlayer]?.name}` : 'Send Public Proposal'}\n      </button>\n\n      {/* Negotiation Strategy Guide */}\n      <div className=\"p-4 bg-muted/20 rounded-lg\">\n        <div className=\"space-y-3\">\n          <p className=\"text-sm font-semibold text-foreground\">Negotiation Strategy:</p>\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs text-muted-foreground\">\n            <div className=\"space-y-1\">\n              <p className=\"font-medium text-foreground\">Alliances:</p>\n              <ul className=\"space-y-0.5\">\n                <li>• Coordinate zone control</li>\n                <li>• Share voter placement info</li>\n                <li>• Joint resource management</li>\n              </ul>\n            </div>\n            <div className=\"space-y-1\">\n              <p className=\"font-medium text-foreground\">Trading:</p>\n              <ul className=\"space-y-0.5\">\n                <li>• Exchange surplus resources</li>\n                <li>• Balance resource portfolios</li>\n                <li>• Enable strategic plays</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2557, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/IdeologyCard.tsx"],"sourcesContent":["import React, { useState } from 'react';\n\ninterface IdeologyCardProps {\n  card: any;\n  onAnswer: (answer: string) => void;\n  onRedraw: () => void;\n  currentPlayer: any;\n}\n\nexport default function IdeologyCard({ card, onAnswer, onRedraw, currentPlayer }: IdeologyCardProps) {\n  const [showRedrawConfirm, setShowRedrawConfirm] = useState(false);\n\n  if (!card) return null;\n\n  const canRedraw = () => {\n    if (!currentPlayer) return false;\n    const totalResources = currentPlayer.resources.funds + currentPlayer.resources.clout + \n                          currentPlayer.resources.media + currentPlayer.resources.trust;\n    return totalResources >= 4;\n  };\n\n  const getResourceDisplay = (resources: any) => {\n    return Object.entries(resources).map(([resource, amount]) => (\n      <span key={resource} className=\"inline-block bg-primary/10 text-primary px-2 py-1 rounded-md text-xs font-medium\">\n        {resource}: +{amount as number}\n      </span>\n    ));\n  };\n\n  const handleRedraw = () => {\n    onRedraw();\n    setShowRedrawConfirm(false);\n  };\n\n  const getIdeologyColor = (ideology: string) => {\n    const colors = {\n      capitalist: 'border-blue-200 hover:border-blue-300 hover:bg-blue-50',\n      supremo: 'border-red-200 hover:border-red-300 hover:bg-red-50',\n      showstopper: 'border-purple-200 hover:border-purple-300 hover:bg-purple-50',\n      idealist: 'border-green-200 hover:border-green-300 hover:bg-green-50'\n    };\n    return colors[ideology as keyof typeof colors] || 'border-gray-200 hover:border-gray-300 hover:bg-gray-50';\n  };\n\n  const getIdeologyTextColor = (ideology: string) => {\n    const colors = {\n      capitalist: 'text-blue-700',\n      supremo: 'text-red-700',\n      showstopper: 'text-purple-700',\n      idealist: 'text-green-700'\n    };\n    return colors[ideology as keyof typeof colors] || 'text-gray-700';\n  };\n\n  return (\n    <div className=\"bg-card border rounded-lg p-6 shadow-sm\">\n      <div className=\"flex justify-between items-start mb-6\">\n        <div className=\"space-y-1\">\n          <h3 className=\"text-xl font-bold tracking-tight\">Ideology Card</h3>\n          <p className=\"text-sm text-muted-foreground\">Choose your political stance</p>\n        </div>\n        \n        {canRedraw() && (\n          <div className=\"relative\">\n            <button\n              onClick={() => setShowRedrawConfirm(true)}\n              className=\"px-3 py-2 text-sm bg-muted text-muted-foreground rounded-md hover:bg-muted/80 transition-colors font-medium\"\n            >\n              Redraw (4 resources)\n            </button>\n            \n            {showRedrawConfirm && (\n              <div className=\"absolute right-0 top-full mt-2 bg-card border rounded-lg p-3 shadow-lg z-10 min-w-48\">\n                <p className=\"text-sm mb-3\">Spend 4 resources to redraw this card?</p>\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={handleRedraw}\n                    className=\"px-3 py-1 text-xs bg-destructive text-destructive-foreground rounded hover:bg-destructive/90\"\n                  >\n                    Confirm\n                  </button>\n                  <button\n                    onClick={() => setShowRedrawConfirm(false)}\n                    className=\"px-3 py-1 text-xs bg-secondary text-secondary-foreground rounded hover:bg-secondary/80\"\n                  >\n                    Cancel\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      <div className=\"mb-6\">\n        <div className=\"p-4 bg-muted/30 rounded-lg border-l-4 border-primary\">\n          <h4 className=\"font-semibold text-lg mb-2\">Political Question</h4>\n          <p className=\"text-foreground\">{card.question}</p>\n        </div>\n      </div>\n\n      <div className=\"space-y-4\">\n        {/* Capitalist Option */}\n        {card.capitalist && (\n          <div \n            className={`p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ${getIdeologyColor('capitalist')}`}\n            onClick={() => onAnswer('capitalist')}\n          >\n            <div className=\"flex justify-between items-start mb-3\">\n              <span className={`text-sm font-bold ${getIdeologyTextColor('capitalist')}`}>\n                The Capitalist\n              </span>\n              <div className=\"flex flex-wrap gap-2\">\n                {getResourceDisplay(card.capitalist.resources)}\n              </div>\n            </div>\n            <p className=\"text-sm text-foreground leading-relaxed\">{card.capitalist.text}</p>\n          </div>\n        )}\n\n        {/* Supremo Option */}\n        {card.supremo && (\n          <div \n            className={`p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ${getIdeologyColor('supremo')}`}\n            onClick={() => onAnswer('supremo')}\n          >\n            <div className=\"flex justify-between items-start mb-3\">\n              <span className={`text-sm font-bold ${getIdeologyTextColor('supremo')}`}>\n                The Supremo\n              </span>\n              <div className=\"flex flex-wrap gap-2\">\n                {getResourceDisplay(card.supremo.resources)}\n              </div>\n            </div>\n            <p className=\"text-sm text-foreground leading-relaxed\">{card.supremo.text}</p>\n          </div>\n        )}\n\n        {/* Showstopper Option */}\n        {card.showstopper && (\n          <div \n            className={`p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ${getIdeologyColor('showstopper')}`}\n            onClick={() => onAnswer('showstopper')}\n          >\n            <div className=\"flex justify-between items-start mb-3\">\n              <span className={`text-sm font-bold ${getIdeologyTextColor('showstopper')}`}>\n                The Showstopper\n              </span>\n              <div className=\"flex flex-wrap gap-2\">\n                {getResourceDisplay(card.showstopper.resources)}\n              </div>\n            </div>\n            <p className=\"text-sm text-foreground leading-relaxed\">{card.showstopper.text}</p>\n          </div>\n        )}\n\n        {/* Idealist Option */}\n        {card.idealist && (\n          <div \n            className={`p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ${getIdeologyColor('idealist')}`}\n            onClick={() => onAnswer('idealist')}\n          >\n            <div className=\"flex justify-between items-start mb-3\">\n              <span className={`text-sm font-bold ${getIdeologyTextColor('idealist')}`}>\n                The Idealist\n              </span>\n              <div className=\"flex flex-wrap gap-2\">\n                {getResourceDisplay(card.idealist.resources)}\n              </div>\n            </div>\n            <p className=\"text-sm text-foreground leading-relaxed\">{card.idealist.text}</p>\n          </div>\n        )}\n      </div>\n\n      <div className=\"mt-6 p-3 bg-muted/20 rounded-lg\">\n        <p className=\"text-xs text-muted-foreground text-center\">\n          Choose your answer to receive resources and build your ideological power. Each choice shapes your political identity.\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2957, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/VoterCards.tsx"],"sourcesContent":["import React from 'react';\n\ninterface VoterCardsProps {\n  openCards: any[];\n  sendMessage: (msg: any) => void;\n  currentPlayer: any;\n  isCurrentTurn: boolean;\n}\n\nexport default function VoterCards({ openCards, sendMessage, currentPlayer, isCurrentTurn }: VoterCardsProps) {\n  if (!openCards || openCards.length === 0) {\n    return (\n      <div className=\"bg-card border rounded-lg p-6 shadow-sm\">\n        <div className=\"space-y-2 mb-4\">\n          <h3 className=\"text-xl font-bold tracking-tight\">Voter Cards</h3>\n          <p className=\"text-sm text-muted-foreground\">Available influence opportunities</p>\n        </div>\n        <div className=\"text-center py-8\">\n          <div className=\"text-4xl mb-2\">⏳</div>\n          <p className=\"text-sm text-muted-foreground\">Loading voter cards...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const canAffordCard = (card: any) => {\n    if (!currentPlayer || !card.cost) return false;\n    \n    return Object.entries(card.cost).every(([resource, amount]) => \n      currentPlayer.resources[resource] >= (amount as number)\n    );\n  };\n\n  const handleInfluenceVoters = (cardId: number) => {\n    if (isCurrentTurn && canAffordCard(openCards.find(c => c.id === cardId))) {\n      sendMessage({ type: 'influenceVoters', cardId });\n    }\n  };\n\n  const getResourceCostDisplay = (cost: any) => {\n    return Object.entries(cost).map(([resource, amount]) => (\n      <span key={resource} className=\"inline-block bg-muted text-muted-foreground px-2 py-1 rounded-md text-xs font-medium\">\n        {resource}: {amount as number}\n      </span>\n    ));\n  };\n\n  const getCardStatusColor = (card: any) => {\n    if (!isCurrentTurn) return 'border-muted bg-muted/10';\n    if (canAffordCard(card)) return 'border-primary/30 bg-primary/5 hover:border-primary/50 hover:bg-primary/10';\n    return 'border-destructive/30 bg-destructive/5';\n  };\n\n  const getCardStatusText = (card: any) => {\n    if (!isCurrentTurn) return 'Wait for your turn';\n    if (!canAffordCard(card)) return 'Insufficient resources';\n    return 'Click to influence voters';\n  };\n\n  return (\n    <div className=\"bg-card border rounded-lg p-6 shadow-sm\">\n      <div className=\"space-y-2 mb-6\">\n        <h3 className=\"text-xl font-bold tracking-tight\">Voter Cards</h3>\n        <p className=\"text-sm text-muted-foreground\">Available influence opportunities</p>\n      </div>\n      \n      <div className=\"space-y-4\">\n        {openCards.map((card) => (\n          <div\n            key={card.id}\n            className={`p-4 border-2 rounded-lg transition-all duration-200 ${getCardStatusColor(card)} ${\n              canAffordCard(card) && isCurrentTurn ? 'cursor-pointer' : 'cursor-not-allowed'\n            }`}\n            onClick={() => handleInfluenceVoters(card.id)}\n          >\n            <div className=\"flex justify-between items-start mb-3\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-primary\">{card.voters}</div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    {card.voters === 1 ? 'Voter' : 'Voters'}\n                  </div>\n                </div>\n                <div className=\"text-sm text-muted-foreground\">\n                  Influence {card.voters} voter{card.voters !== 1 ? 's' : ''} to support your cause\n                </div>\n              </div>\n              \n              <div className=\"flex flex-wrap gap-2\">\n                {getResourceCostDisplay(card.cost)}\n              </div>\n            </div>\n            \n            <div className=\"flex justify-between items-center\">\n              <div className=\"text-xs text-muted-foreground\">\n                {getCardStatusText(card)}\n              </div>\n              \n              {canAffordCard(card) && isCurrentTurn && (\n                <div className=\"text-xs text-primary font-medium\">\n                  Ready to influence →\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"mt-6 p-4 bg-muted/20 rounded-lg\">\n        <div className=\"space-y-2\">\n          <p className=\"text-xs font-medium text-foreground\">How to Use Voter Cards:</p>\n          <ul className=\"text-xs text-muted-foreground space-y-1\">\n            <li>• Pay the required resources to influence voters</li>\n            <li>• Place all voters from a card in a single zone</li>\n            <li>• Strategic placement can help you gain zone majorities</li>\n            <li>• New cards appear when others are used</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AASe,SAAS,WAAW,EAAE,SAAS,EAAE,WAAW,EAAE,aAAa,EAAE,aAAa,EAAmB;IAC1G,IAAI,CAAC,aAAa,UAAU,MAAM,KAAK,GAAG;QACxC,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAmC;;;;;;sCACjD,6LAAC;4BAAE,WAAU;sCAAgC;;;;;;;;;;;;8BAE/C,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCAAgB;;;;;;sCAC/B,6LAAC;4BAAE,WAAU;sCAAgC;;;;;;;;;;;;;;;;;;IAIrD;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,CAAC,iBAAiB,CAAC,KAAK,IAAI,EAAE,OAAO;QAEzC,OAAO,OAAO,OAAO,CAAC,KAAK,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC,UAAU,OAAO,GACxD,cAAc,SAAS,CAAC,SAAS,IAAK;IAE1C;IAEA,MAAM,wBAAwB,CAAC;QAC7B,IAAI,iBAAiB,cAAc,UAAU,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,UAAU;YACxE,YAAY;gBAAE,MAAM;gBAAmB;YAAO;QAChD;IACF;IAEA,MAAM,yBAAyB,CAAC;QAC9B,OAAO,OAAO,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,UAAU,OAAO,iBACjD,6LAAC;gBAAoB,WAAU;;oBAC5B;oBAAS;oBAAG;;eADJ;;;;;IAIf;IAEA,MAAM,qBAAqB,CAAC;QAC1B,IAAI,CAAC,eAAe,OAAO;QAC3B,IAAI,cAAc,OAAO,OAAO;QAChC,OAAO;IACT;IAEA,MAAM,oBAAoB,CAAC;QACzB,IAAI,CAAC,eAAe,OAAO;QAC3B,IAAI,CAAC,cAAc,OAAO,OAAO;QACjC,OAAO;IACT;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,6LAAC;wBAAE,WAAU;kCAAgC;;;;;;;;;;;;0BAG/C,6LAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAC,qBACd,6LAAC;wBAEC,WAAW,CAAC,oDAAoD,EAAE,mBAAmB,MAAM,CAAC,EAC1F,cAAc,SAAS,gBAAgB,mBAAmB,sBAC1D;wBACF,SAAS,IAAM,sBAAsB,KAAK,EAAE;;0CAE5C,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;kEAAmC,KAAK,MAAM;;;;;;kEAC7D,6LAAC;wDAAI,WAAU;kEACZ,KAAK,MAAM,KAAK,IAAI,UAAU;;;;;;;;;;;;0DAGnC,6LAAC;gDAAI,WAAU;;oDAAgC;oDAClC,KAAK,MAAM;oDAAC;oDAAO,KAAK,MAAM,KAAK,IAAI,MAAM;oDAAG;;;;;;;;;;;;;kDAI/D,6LAAC;wCAAI,WAAU;kDACZ,uBAAuB,KAAK,IAAI;;;;;;;;;;;;0CAIrC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;kDACZ,kBAAkB;;;;;;oCAGpB,cAAc,SAAS,+BACtB,6LAAC;wCAAI,WAAU;kDAAmC;;;;;;;;;;;;;uBA9BjD,KAAK,EAAE;;;;;;;;;;0BAuClB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAE,WAAU;sCAAsC;;;;;;sCACnD,6LAAC;4BAAG,WAAU;;8CACZ,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;8CACJ,6LAAC;8CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMhB;KAhHwB","debugId":null}},
    {"offset": {"line": 3275, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/ConnectionStatus.tsx"],"sourcesContent":["import React from 'react';\n\ninterface ConnectionStatusProps {\n  status: 'disconnected' | 'connecting' | 'connected';\n  error?: string | null;\n  onRetry?: () => void;\n}\n\nexport default function ConnectionStatus({ status, error, onRetry }: ConnectionStatusProps) {\n  const getStatusColor = () => {\n    switch (status) {\n      case 'connected':\n        return 'text-green-600';\n      case 'connecting':\n        return 'text-yellow-600';\n      case 'disconnected':\n        return 'text-red-600';\n      default:\n        return 'text-muted-foreground';\n    }\n  };\n\n  const getStatusText = () => {\n    switch (status) {\n      case 'connected':\n        return 'Connected';\n      case 'connecting':\n        return 'Connecting...';\n      case 'disconnected':\n        return 'Disconnected';\n      default:\n        return 'Unknown';\n    }\n  };\n\n  const getStatusIcon = () => {\n    switch (status) {\n      case 'connected':\n        return '●';\n      case 'connecting':\n        return '◐';\n      case 'disconnected':\n        return '○';\n      default:\n        return '?';\n    }\n  };\n\n  return (\n    <div className=\"flex items-center space-x-3\">\n      {/* Status Indicator */}\n      <div className=\"flex items-center space-x-2\">\n        <span className={`text-sm ${getStatusColor()}`}>\n          {getStatusIcon()}\n        </span>\n        <span className={`text-sm font-medium ${getStatusColor()}`}>\n          {getStatusText()}\n        </span>\n      </div>\n\n      {/* Retry Button */}\n      {status === 'disconnected' && onRetry && (\n        <button\n          onClick={onRetry}\n          className=\"px-2 py-1 text-xs bg-primary text-primary-foreground rounded hover:bg-primary/90 transition-colors\"\n        >\n          Retry\n        </button>\n      )}\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"max-w-xs\">\n          <div className=\"px-2 py-1 bg-destructive/10 border border-destructive/20 rounded text-xs text-destructive\">\n            {error}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAQe,SAAS,iBAAiB,EAAE,MAAM,EAAE,KAAK,EAAE,OAAO,EAAyB;IACxF,MAAM,iBAAiB;QACrB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,MAAM,gBAAgB;QACpB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,MAAM,gBAAgB;QACpB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAK,WAAW,CAAC,QAAQ,EAAE,kBAAkB;kCAC3C;;;;;;kCAEH,6LAAC;wBAAK,WAAW,CAAC,oBAAoB,EAAE,kBAAkB;kCACvD;;;;;;;;;;;;YAKJ,WAAW,kBAAkB,yBAC5B,6LAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;YAMF,uBACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACZ;;;;;;;;;;;;;;;;;AAMb;KAxEwB","debugId":null}},
    {"offset": {"line": 3388, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/MoveHistoryPanel.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\n\ninterface MoveHistoryEvent {\n  id: string;\n  timestamp: number;\n  type: string;\n  description: string;\n  playerId?: string;\n  playerName?: string;\n  details?: any;\n}\n\ninterface MoveHistoryPanelProps {\n  isOpen: boolean;\n  onClose: () => void;\n  moveHistory: MoveHistoryEvent[];\n  players: Record<string, any>;\n}\n\nexport default function MoveHistoryPanel({ \n  isOpen, \n  onClose, \n  moveHistory, \n  players \n}: MoveHistoryPanelProps) {\n  if (!isOpen) return null;\n\n  const formatTime = (timestamp: number) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' });\n  };\n\n  const getEventIcon = (type: string) => {\n    const icons: Record<string, string> = {\n      'gameStarted': '🎮',\n      'ideologyAnswered': '💭',\n      'votersInfluenced': '👥',\n      'votersPlaced': '📍',\n      'gerrymandered': '🔄',\n      'turnEnded': '⏭️',\n      'playerJoined': '👋',\n      'playerDisconnected': '👋',\n      'negotiate': '🤝',\n      'headlineTriggered': '📰',\n      'gameEnded': '🏆',\n      'error': '⚠️'\n    };\n    return icons[type] || '📝';\n  };\n\n  const getEventColor = (type: string) => {\n    const colors: Record<string, string> = {\n      'gameStarted': 'text-green-600',\n      'ideologyAnswered': 'text-blue-600',\n      'votersInfluenced': 'text-purple-600',\n      'votersPlaced': 'text-orange-600',\n      'gerrymandered': 'text-yellow-600',\n      'turnEnded': 'text-gray-600',\n      'playerJoined': 'text-green-500',\n      'playerDisconnected': 'text-red-500',\n      'negotiate': 'text-cyan-600',\n      'headlineTriggered': 'text-red-600',\n      'gameEnded': 'text-gold-600',\n      'error': 'text-destructive'\n    };\n    return colors[type] || 'text-muted-foreground';\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n      <div className=\"bg-card border rounded-lg max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex justify-between items-center p-4 border-b\">\n          <h2 className=\"text-lg font-semibold\">Move History</h2>\n          <button\n            onClick={onClose}\n            className=\"text-muted-foreground hover:text-foreground transition-colors\"\n          >\n            ✕\n          </button>\n        </div>\n\n        {/* History List */}\n        <div className=\"flex-1 overflow-y-auto p-4\">\n          {moveHistory.length === 0 ? (\n            <div className=\"text-center text-muted-foreground py-8\">\n              <p>No moves recorded yet</p>\n              <p className=\"text-sm mt-2\">Game events will appear here as they happen</p>\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {moveHistory.slice().reverse().map((event) => (\n                <div\n                  key={event.id}\n                  className=\"flex items-start space-x-3 p-3 bg-muted/30 rounded-md hover:bg-muted/50 transition-colors\"\n                >\n                  {/* Event Icon */}\n                  <div className=\"text-lg flex-shrink-0 mt-0.5\">\n                    {getEventIcon(event.type)}\n                  </div>\n\n                  {/* Event Content */}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center justify-between mb-1\">\n                      <span className={`text-sm font-medium ${getEventColor(event.type)}`}>\n                        {event.type.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}\n                      </span>\n                      <span className=\"text-xs text-muted-foreground\">\n                        {formatTime(event.timestamp)}\n                      </span>\n                    </div>\n                    \n                    <p className=\"text-sm text-foreground\">\n                      {event.description}\n                    </p>\n\n                    {event.playerName && (\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        Player: {event.playerName}\n                      </p>\n                    )}\n\n                    {event.details && (\n                      <div className=\"text-xs text-muted-foreground mt-1 bg-muted/50 p-2 rounded\">\n                        <pre className=\"whitespace-pre-wrap\">\n                          {typeof event.details === 'string' \n                            ? event.details \n                            : JSON.stringify(event.details, null, 2)\n                          }\n                        </pre>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"p-4 border-t bg-muted/20\">\n          <div className=\"flex justify-between items-center text-xs text-muted-foreground\">\n            <span>{moveHistory.length} events recorded</span>\n            <span>Most recent events shown first</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AAqBe,SAAS,iBAAiB,EACvC,MAAM,EACN,OAAO,EACP,WAAW,EACX,OAAO,EACe;IACtB,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC,EAAE,EAAE;YAAE,MAAM;YAAW,QAAQ;YAAW,QAAQ;QAAU;IAC7F;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,QAAgC;YACpC,eAAe;YACf,oBAAoB;YACpB,oBAAoB;YACpB,gBAAgB;YAChB,iBAAiB;YACjB,aAAa;YACb,gBAAgB;YAChB,sBAAsB;YACtB,aAAa;YACb,qBAAqB;YACrB,aAAa;YACb,SAAS;QACX;QACA,OAAO,KAAK,CAAC,KAAK,IAAI;IACxB;IAEA,MAAM,gBAAgB,CAAC;QACrB,MAAM,SAAiC;YACrC,eAAe;YACf,oBAAoB;YACpB,oBAAoB;YACpB,gBAAgB;YAChB,iBAAiB;YACjB,aAAa;YACb,gBAAgB;YAChB,sBAAsB;YACtB,aAAa;YACb,qBAAqB;YACrB,aAAa;YACb,SAAS;QACX;QACA,OAAO,MAAM,CAAC,KAAK,IAAI;IACzB;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAwB;;;;;;sCACtC,6LAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;8BAMH,6LAAC;oBAAI,WAAU;8BACZ,YAAY,MAAM,KAAK,kBACtB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;0CAAE;;;;;;0CACH,6LAAC;gCAAE,WAAU;0CAAe;;;;;;;;;;;6CAG9B,6LAAC;wBAAI,WAAU;kCACZ,YAAY,KAAK,GAAG,OAAO,GAAG,GAAG,CAAC,CAAC,sBAClC,6LAAC;gCAEC,WAAU;;kDAGV,6LAAC;wCAAI,WAAU;kDACZ,aAAa,MAAM,IAAI;;;;;;kDAI1B,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAK,WAAW,CAAC,oBAAoB,EAAE,cAAc,MAAM,IAAI,GAAG;kEAChE,MAAM,IAAI,CAAC,OAAO,CAAC,YAAY,OAAO,OAAO,CAAC,MAAM,CAAA,MAAO,IAAI,WAAW;;;;;;kEAE7E,6LAAC;wDAAK,WAAU;kEACb,WAAW,MAAM,SAAS;;;;;;;;;;;;0DAI/B,6LAAC;gDAAE,WAAU;0DACV,MAAM,WAAW;;;;;;4CAGnB,MAAM,UAAU,kBACf,6LAAC;gDAAE,WAAU;;oDAAqC;oDACvC,MAAM,UAAU;;;;;;;4CAI5B,MAAM,OAAO,kBACZ,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDAAI,WAAU;8DACZ,OAAO,MAAM,OAAO,KAAK,WACtB,MAAM,OAAO,GACb,KAAK,SAAS,CAAC,MAAM,OAAO,EAAE,MAAM;;;;;;;;;;;;;;;;;;+BAlC3C,MAAM,EAAE;;;;;;;;;;;;;;;8BA+CvB,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;;oCAAM,YAAY,MAAM;oCAAC;;;;;;;0CAC1B,6LAAC;0CAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMlB;KAlIwB","debugId":null}},
    {"offset": {"line": 3648, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/components/ErrorBoundary.tsx"],"sourcesContent":["'use client';\n\nimport React, { Component, ErrorInfo, ReactNode } from 'react';\n\ninterface Props {\n  children: ReactNode;\n  fallback?: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error?: Error;\n  errorInfo?: ErrorInfo;\n}\n\nexport default class ErrorBoundary extends Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n    this.setState({ error, errorInfo });\n  }\n\n  handleRetry = () => {\n    this.setState({ hasError: false, error: undefined, errorInfo: undefined });\n  };\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-background\">\n          <div className=\"max-w-md w-full mx-4 p-6 bg-card border rounded-lg text-center space-y-4\">\n            <div className=\"text-destructive text-4xl mb-4\">⚠️</div>\n            <h2 className=\"text-xl font-semibold text-foreground\">Something went wrong</h2>\n            <p className=\"text-muted-foreground text-sm\">\n              An unexpected error occurred while rendering the game interface.\n            </p>\n            \n            {this.state.error && (\n              <details className=\"text-left text-xs bg-muted p-3 rounded\">\n                <summary className=\"cursor-pointer font-medium mb-2\">Error Details</summary>\n                <pre className=\"whitespace-pre-wrap text-muted-foreground\">\n                  {this.state.error.message}\n                </pre>\n              </details>\n            )}\n            \n            <div className=\"space-y-2\">\n              <button\n                onClick={this.handleRetry}\n                className=\"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors\"\n              >\n                Try Again\n              </button>\n              <button\n                onClick={() => window.location.reload()}\n                className=\"w-full px-4 py-2 bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/80 transition-colors\"\n              >\n                Reload Page\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAee,MAAM,sBAAsB,6JAAA,CAAA,YAAS;IAClD,YAAY,KAAY,CAAE;QACxB,KAAK,CAAC;QACN,IAAI,CAAC,KAAK,GAAG;YAAE,UAAU;QAAM;IACjC;IAEA,OAAO,yBAAyB,KAAY,EAAS;QACnD,OAAO;YAAE,UAAU;YAAM;QAAM;IACjC;IAEA,kBAAkB,KAAY,EAAE,SAAoB,EAAE;QACpD,QAAQ,KAAK,CAAC,kCAAkC,OAAO;QACvD,IAAI,CAAC,QAAQ,CAAC;YAAE;YAAO;QAAU;IACnC;IAEA,cAAc;QACZ,IAAI,CAAC,QAAQ,CAAC;YAAE,UAAU;YAAO,OAAO;YAAW,WAAW;QAAU;IAC1E,EAAE;IAEF,SAAS;QACP,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACvB,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACvB,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;YAC5B;YAEA,qBACE,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCAAiC;;;;;;sCAChD,6LAAC;4BAAG,WAAU;sCAAwC;;;;;;sCACtD,6LAAC;4BAAE,WAAU;sCAAgC;;;;;;wBAI5C,IAAI,CAAC,KAAK,CAAC,KAAK,kBACf,6LAAC;4BAAQ,WAAU;;8CACjB,6LAAC;oCAAQ,WAAU;8CAAkC;;;;;;8CACrD,6LAAC;oCAAI,WAAU;8CACZ,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO;;;;;;;;;;;;sCAK/B,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS,IAAI,CAAC,WAAW;oCACzB,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS,IAAM,OAAO,QAAQ,CAAC,MAAM;oCACrC,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;QAOX;QAEA,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ;IAC5B;AACF","debugId":null}},
    {"offset": {"line": 3793, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { useWebSocket } from '@/hooks/useWebSocket';\nimport GameBoard from '@/components/GameBoard';\nimport ResourcePanel from '@/components/ResourcePanel';\nimport NegotiationPanel from '@/components/NegotiationPanel';\nimport IdeologyCard from '@/components/IdeologyCard';\nimport VoterCards from '@/components/VoterCards';\nimport ConnectionStatus from '@/components/ConnectionStatus';\nimport MoveHistoryPanel from '@/components/MoveHistoryPanel';\nimport ErrorBoundary from '@/components/ErrorBoundary';\n\nexport default function GamePage() {\n  const { \n    gameState, \n    playerId, \n    connectionStatus, \n    lastMessage, \n    error, \n    moveHistory,\n    sendMessage, \n    connect,\n    currentPlayer,\n    isCurrentTurn \n  } = useWebSocket();\n\n  const [showMoveHistory, setShowMoveHistory] = useState(false);\n\n  const handleStartGame = () => {\n    sendMessage({ type: 'startGame' });\n  };\n\n  const handleEndTurn = () => {\n    sendMessage({ type: 'endTurn' });\n  };\n\n  const handleAnswerIdeology = (answer: string) => {\n    sendMessage({ type: 'answerIdeology', answer });\n  };\n\n  const handleRedrawIdeology = () => {\n    sendMessage({ type: 'redrawIdeology' });\n  };\n\n  if (!gameState) {\n    return (\n      <ErrorBoundary>\n        <div className=\"min-h-screen flex items-center justify-center bg-background text-foreground\">\n          <div className=\"text-center space-y-6 max-w-md mx-4\">\n            <div className=\"space-y-2\">\n              <h1 className=\"text-4xl font-bold tracking-tight\">SHASN</h1>\n              <p className=\"text-lg text-muted-foreground\">Multiplayer Political Strategy</p>\n            </div>\n            \n            <ConnectionStatus \n              status={connectionStatus} \n              error={error} \n              onRetry={connect}\n            />\n            \n            <div className=\"space-y-2\">\n              <p className=\"text-muted-foreground\">Connecting to game server...</p>\n              <div className=\"text-xs text-muted-foreground\">\n                Please ensure the WebSocket server is running on port 8080\n              </div>\n            </div>\n          </div>\n        </div>\n      </ErrorBoundary>\n    );\n  }\n\n  return (\n    <ErrorBoundary>\n      <div className=\"min-h-screen p-4 bg-background text-foreground\">\n        <header className=\"mb-6\">\n          <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4\">\n            <div className=\"space-y-1\">\n              <h1 className=\"text-4xl font-bold tracking-tight\">SHASN</h1>\n              <div className=\"flex flex-wrap items-center gap-2 text-sm text-muted-foreground\">\n                <span className=\"bg-muted px-2 py-1 rounded\">\n                  Players: {Object.keys(gameState.players).length}\n                </span>\n                <span className=\"bg-muted px-2 py-1 rounded\">\n                  Phase: {gameState.gamePhase}\n                </span>\n                {gameState.gamePhase === 'playing' && (\n                  <span className=\"bg-primary/10 text-primary px-2 py-1 rounded\">\n                    Turn: {gameState.players[gameState.turnOrder[gameState.currentTurn]]?.name}\n                    {isCurrentTurn && <span className=\"font-semibold\"> (Your Turn)</span>}\n                  </span>\n                )}\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-3\">\n              <button\n                onClick={() => setShowMoveHistory(true)}\n                className=\"px-3 py-2 text-sm bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/80 transition-colors\"\n              >\n                Move History ({moveHistory.length})\n              </button>\n              \n              <a\n                href=\"/api/download-all\"\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-500 transition-colors text-sm font-medium\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                Download Project Files\n              </a>\n              \n              <ConnectionStatus \n                status={connectionStatus} \n                error={error} \n                onRetry={connect}\n              />\n            </div>\n          </div>\n        </header>\n\n        {/* Game End Notification */}\n        {lastMessage && lastMessage.type === 'gameEnded' && (\n          <div className=\"mb-6 p-6 bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20 rounded-lg\">\n            <div className=\"text-center space-y-2\">\n              <h2 className=\"text-2xl font-bold text-primary\">🏆 Game Over!</h2>\n              <p className=\"text-lg\">\n                <span className=\"font-semibold\">{gameState.players[lastMessage.winner]?.name}</span> wins!\n              </p>\n              <p className=\"text-muted-foreground\">\n                Final Score: {lastMessage.scores[lastMessage.winner]} majority voters\n              </p>\n            </div>\n          </div>\n        )}\n\n        <div className=\"space-y-6\">\n          {/* Resource Panel */}\n          <ResourcePanel \n            gameState={gameState} \n            currentPlayer={currentPlayer}\n            playerId={playerId}\n          />\n\n          {/* Game Setup Phase */}\n          {gameState.gamePhase === 'setup' && (\n            <div className=\"text-center space-y-6 py-8\">\n              <div className=\"space-y-2\">\n                <h2 className=\"text-2xl font-semibold\">Waiting for Players</h2>\n                <p className=\"text-muted-foreground\">\n                  {Object.keys(gameState.players).length >= 2 \n                    ? 'All players ready! You can start the game now.' \n                    : `Need at least 2 players to begin (${Object.keys(gameState.players).length}/2)`\n                  }\n                </p>\n              </div>\n              \n              {Object.keys(gameState.players).length >= 2 && (\n                <button\n                  onClick={handleStartGame}\n                  className=\"px-8 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium\"\n                >\n                  Start Game\n                </button>\n              )}\n            </div>\n          )}\n\n          {/* Main Game Interface */}\n          {gameState.gamePhase === 'playing' && (\n            <div className=\"grid grid-cols-1 xl:grid-cols-4 gap-6\">\n              {/* Game Board - Takes up most space */}\n              <div className=\"xl:col-span-2\">\n                <GameBoard \n                  gameState={gameState} \n                  sendMessage={sendMessage}\n                  isCurrentTurn={isCurrentTurn}\n                  playerId={playerId}\n                />\n              </div>\n\n              {/* Side Panel */}\n              <div className=\"xl:col-span-2 space-y-4\">\n                {/* Current Ideology Card */}\n                {isCurrentTurn && gameState.currentIdeologyCard && (\n                  <IdeologyCard \n                    card={gameState.currentIdeologyCard}\n                    onAnswer={handleAnswerIdeology}\n                    onRedraw={handleRedrawIdeology}\n                    currentPlayer={currentPlayer}\n                  />\n                )}\n\n                {/* Voter Cards */}\n                <VoterCards \n                  openCards={gameState.openVoterCards}\n                  sendMessage={sendMessage}\n                  currentPlayer={currentPlayer}\n                  isCurrentTurn={isCurrentTurn}\n                />\n\n                {/* Negotiation Panel */}\n                <NegotiationPanel \n                  sendMessage={sendMessage}\n                  players={gameState.players}\n                  currentPlayerId={playerId}\n                />\n\n                {/* Turn Actions */}\n                {isCurrentTurn && (\n                  <div className=\"p-4 border rounded-lg bg-card\">\n                    <h3 className=\"font-semibold mb-3\">Turn Actions</h3>\n                    <button\n                      onClick={handleEndTurn}\n                      className=\"w-full px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors font-medium\"\n                    >\n                      End Turn\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Move History Panel */}\n        <MoveHistoryPanel\n          isOpen={showMoveHistory}\n          onClose={() => setShowMoveHistory(false)}\n          moveHistory={moveHistory}\n          players={gameState.players}\n        />\n      </div>\n    </ErrorBoundary>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}